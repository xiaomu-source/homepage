import{L as C,N as B,O as M,k as D,z as V,P as L,Q as O,R as I,S as k,U as x,G as z,x as R,o as F,a as N,c as K,b as T}from"./index-dca43598.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";var G=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],q=function(e){return G.map(function(i){return i.toLowerCase()}).indexOf(e.toLowerCase())!==-1},Y=function(e,i,n){Object.keys(i).filter(q).forEach(function(a){var o=i[a];typeof o=="function"&&(a==="onInit"?o(e,n):n.on(a.substring(2),function(r){return o(r,n)}))})},Q=function(e,i,n,a){var o=e.modelEvents?e.modelEvents:null,r=Array.isArray(o)?o.join(" "):o;C(a,function(u,l){n&&typeof u=="string"&&u!==l&&u!==n.getContent({format:e.outputFormat})&&n.setContent(u)}),n.on(r||"change input undo redo",function(){i.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},W=function(e,i,n,a,o,r){a.setContent(r()),n.attrs["onUpdate:modelValue"]&&Q(i,n,a,o),Y(e,n.attrs,a)},E=0,P=function(e){var i=Date.now(),n=Math.floor(Math.random()*1e9);return E++,e+"_"+n+E+String(i)},J=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},w=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},X=function(e,i){return w(e).concat(w(i))},Z=function(e){return e==null},A=function(){return{listeners:[],scriptId:P("tiny-script"),scriptLoaded:!1}},$=function(){var e=A(),i=function(o,r,u,l){var t=r.createElement("script");t.referrerPolicy="origin",t.type="application/javascript",t.id=o,t.src=u;var d=function(){t.removeEventListener("load",d),l()};t.addEventListener("load",d),r.head&&r.head.appendChild(t)},n=function(o,r,u){e.scriptLoaded?u():(e.listeners.push(u),o.getElementById(e.scriptId)||i(e.scriptId,o,r,function(){e.listeners.forEach(function(l){return l()}),e.scriptLoaded=!0}))},a=function(){e=A()};return{load:n,reinitialize:a}},ee=$(),ne=function(){return typeof window<"u"?window:global},m=function(){var e=ne();return e&&e.tinymce?e.tinymce:null},te={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},g=globalThis&&globalThis.__assign||function(){return g=Object.assign||function(e){for(var i,n=1,a=arguments.length;n<a;n++){i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},g.apply(this,arguments)},ie=function(e,i,n,a){return e(a||"div",{id:i,ref:n})},ae=function(e,i,n){return e("textarea",{id:i,visibility:"hidden",ref:n})},oe=B({props:te,setup:function(e,i){var n=e.init?g({},e.init):{},a=M(e),o=a.disabled,r=a.modelValue,u=a.tagName,l=D(null),t=null,d=e.id||P("tiny-vue"),f=e.init&&e.init.inline||e.inline,v=!!i.attrs["onUpdate:modelValue"],y=!0,_=e.initialValue?e.initialValue:"",p="",S=function(s){return v?function(){return r!=null&&r.value?r.value:""}:function(){return s?_:p}},h=function(){var s=S(y),c=g(g({},n),{readonly:e.disabled,target:l.value,plugins:X(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:f,setup:function(b){t=b,b.on("init",function(j){return W(j,e,i,b,r,s)}),typeof n.setup=="function"&&n.setup(b)}});J(l.value)&&(l.value.style.visibility=""),m().init(c),y=!1};C(o,function(s){var c;t!==null&&(typeof((c=t.mode)===null||c===void 0?void 0:c.set)=="function"?t.mode.set(s?"readonly":"design"):t.setMode(s?"readonly":"design"))}),C(u,function(s){var c;v||(p=t.getContent()),(c=m())===null||c===void 0||c.remove(t),x(function(){return h()})}),V(function(){if(m()!==null)h();else if(l.value&&l.value.ownerDocument){var s=e.cloudChannel?e.cloudChannel:"6",c=e.apiKey?e.apiKey:"no-api-key",b=Z(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(s,"/tinymce.min.js"):e.tinymceScriptSrc;ee.load(l.value.ownerDocument,b,h)}}),L(function(){m()!==null&&m().remove(t)}),f||(O(function(){y||h()}),I(function(){var s;v||(p=t.getContent()),(s=m())===null||s===void 0||s.remove(t)}));var U=function(s){var c;p=t.getContent(),(c=m())===null||c===void 0||c.remove(t),n=g(g({},n),s),x(function(){return h()})};return i.expose({rerender:U,getEditor:function(){return t}}),function(){return f?ie(k,d,l,e.tagName):ae(k,d,l)}}});const re=["template fullscreen undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent | bullist numlist | blockquote subscript superscript removeformat ","styleselect formatselect fontselect fontsizeselect | table image axupimgs media emoticons charmap hr pagebreak insertdatetime  selectall visualblocks searchreplace | code print preview | indent2em lineheight formatpainter"],le="template preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount autosave emoticons";const ue={class:"tinymce-boxz"},se={__name:"index",props:{value:{type:String,default:""},height:{type:Number,default(){return 500}},placeholder:{type:String,default(){return"请输入内容"}},skin:{type:String,default(){return"oxide"}}},emits:["update:value"],setup(e,{emit:i}){const n=e,a=D(n.value),o=z({apiKey:"74eea86445c36b7310f12bd0b11bb0328807bdf842468974b0f48a2c20804798",init:{skin:n.skin,language:"zh_CN",placeholder:n.placeholder,min_width:320,min_height:220,height:n.height,resize:"both",branding:!1,statusbar:!1,font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",plugins:le,toolbar:re,templates:[{title:"模板1",description:"模板描述",content:"## 菜单栏配置，设为false则隐藏，不配置则默认显示全部菜单，也可自定义配置"}],paste_data_images:!0,images_upload_handler:(r,u,l)=>{let t=new FileReader;t.readAsDataURL(r.blob()),t.onloadend=function(){const d=t.result;u(d)}},file_picker_types:"file image media",file_picker_callback:function(r,u,l){let t;l.filetype=="image"?t=".jpg, .jpeg, .png, .gif, .ico, .svg":l.filetype=="media"?t=".mp3, .mp4, .avi, .mov":t=".pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4, .jpg, .jpeg, .png, .gif, .ico, .svg";let d=document.createElement("input");d.setAttribute("type","file"),d.setAttribute("accept",t),d.click(),d.onchange=()=>{let f=d.files[0],v=new FileReader;v.readAsDataURL(f),v.onload=function(){let y="blobid"+new Date().getTime(),_=tinymce.activeEditor.editorUpload.blobCache,p=v.result.split(",")[1],S=_.create(y,f,p);_.add(S),r(S.blobUri(),{title:f.name})}}}}});return R(()=>{i("update:value",a.value)}),(r,u)=>(F(),N("div",ue,[K(T(oe),{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=l=>a.value=l),"api-key":o.apiKey,init:o.init},null,8,["modelValue","api-key","init"])]))}},fe=H(se,[["__scopeId","data-v-e8de77ff"]]);export{fe as default};

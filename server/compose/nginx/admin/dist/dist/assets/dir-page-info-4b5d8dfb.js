import{_ as G,Z as b,a as D,b as P,c as j,T as q}from"./util.time-117201b0.js";import{G as I,k as z,r,o as w,a as C,c as t,w as i,f as K,Z as E,H as F,g as v,t as Z,I as B,e as R,y as M}from"./index-dca43598.js";import"./server-b9531d4c.js";import O from"./index-a48b51d8.js";import{_ as W}from"./ZyToolButton-379302e5.js";import{Z as H}from"./ZySearchForm-eb2c604b.js";import{i as U}from"./util.common-1af15359.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./axios-707ed124.js";const Y={class:"zy-get"},J={style:{width:"500px"}},Q={__name:"get-page-info",props:{updateData:{type:Object,default:()=>{}}},emits:["close"],setup(c,{emit:y}){const e=c,A={style:{width:"70px"}},u={span:14},s=I({form:{}}),g=z();z(!e.updateData).value||(s.form=e.updateData||{});const _=async()=>{try{const d=await g.value.validateFields();E.success("操作成功"),y("close",!0)}catch(d){console.log("Failed:",d)}},x=()=>{F("还没保存数据，确认退出?").then(d=>{d&&y("close")})};return(d,n)=>{const h=r("a-input"),m=r("a-form-item"),a=r("a-textarea"),o=r("a-form");return w(),C("section",Y,[t(o,{model:s.form,class:"zy-form","label-col":A,ref_key:"formRef",ref:g,"wrapper-col":u},{default:i(()=>[t(m,{label:"封面",name:"coverImage",rules:[{required:!0,message:"请输入封面!"}]},{default:i(()=>[t(h,{value:s.form.coverImage,"onUpdate:value":n[0]||(n[0]=l=>s.form.coverImage=l),allowClear:"",placeholder:"请输入封面"},null,8,["value"])]),_:1}),t(m,{label:"标题",name:"title",rules:[{required:!0,message:"请输入标题!"}]},{default:i(()=>[t(h,{value:s.form.title,"onUpdate:value":n[1]||(n[1]=l=>s.form.title=l),allowClear:"",placeholder:"请输入标题"},null,8,["value"])]),_:1}),t(m,{label:"分类",name:"category",rules:[{required:!0,message:"请输入分类!"}]},{default:i(()=>[t(h,{value:s.form.category,"onUpdate:value":n[2]||(n[2]=l=>s.form.category=l),allowClear:"",placeholder:"请输入分类"},null,8,["value"])]),_:1}),t(m,{label:"摘要",name:"summary"},{default:i(()=>[t(a,{value:s.form.summary,"onUpdate:value":n[3]||(n[3]=l=>s.form.summary=l),allowClear:"",placeholder:"请输入备注"},null,8,["value"])]),_:1}),t(m,{label:"内容",name:"content"},{default:i(()=>[K("div",J,[t(O,{value:s.form.content,"onUpdate:value":n[4]||(n[4]=l=>s.form.content=l),height:300},null,8,["value"])])]),_:1})]),_:1},8,["model"]),t(G,{onSave:_,onClose:x})])}}},X={class:"zy-view"},ee={__name:"view-page-info",props:{viewData:{type:Object,default:()=>{}}},emits:["close"],setup(c,{emit:y}){return console.log(c.viewData),(A,u)=>{const s=r("a-tag"),g=r("a-textarea");return w(),C("section",X,[t(D,null,{default:i(()=>[t(b,{label:"封面"},{default:i(()=>[v(Z(c.viewData.coverImage),1)]),_:1}),t(b,{label:"标题"},{default:i(()=>[v(Z(c.viewData.title),1)]),_:1})]),_:1}),t(D,null,{default:i(()=>[t(b,{label:"分类"},{default:i(()=>[v(Z(c.viewData.category),1)]),_:1}),t(b,{label:"状态"},{default:i(()=>[t(s,{color:"#f70"},{default:i(()=>[v(Z(c.viewData.status),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:i(()=>[t(b,{label:"摘要"},{default:i(()=>[t(g,{value:c.viewData.summary,"onUpdate:value":u[0]||(u[0]=T=>c.viewData.summary=T),style:{width:"500px"},disabled:"",placeholder:"Autosize height based on content lines","auto-size":""},null,8,["value"])]),_:1})]),_:1})])}}},ce={__name:"dir-page-info",setup(c){const y=[{title:"封面",dataIndex:"coverImage",ellipsis:!0,key:"coverImage",align:"center"},{title:"标题",dataIndex:"title",key:"title",ellipsis:!0,align:"center"},{title:"摘要",dataIndex:"summary",key:"summary",ellipsis:!0,align:"center"},{title:"分类",dataIndex:"category",key:"category",ellipsis:!0,align:"center"},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0,align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",sorter:(a,o)=>{},align:"center"},{title:"操作",width:225,key:"action",align:"center",fixed:"right"}],e=I({show:{add:!1,edit:!1,view:!1},editTitle:"编辑用户",activeComponent:null,selectedRowKeys:[],updateData:{},resetData:{},viewData:{},query:{params:{},pagination:{current:1,pageSize:10,total:0,hideOnSinglePage:!0},sort:{columnKey:"createdAt",order:"ascend"}},dataList:[],loading:{spinning:!1,tip:"加载中"}}),A=a=>{e.selectedRowKeys=a},u=(a=1)=>{e.query.pagination.current=a,_()},s=()=>{u()},g=({current:a,pageSize:o})=>{e.query.pagination=I({current:a,pageSize:o}),_()},T=({columnKey:a,order:o})=>{e.query.sort=I({current:a,order:o}),_()},_=()=>{e.loading.spinning=!0,B(e.query);let a={data:{result:[{_id:"1",title:"Lorem Ipsum",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",summary:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",tags:["lorem","ipsum","dolor"],category:"General",coverImage:"image1.jpg",status:"draft",createdAt:"2023-07-06T10:30:00Z",updatedAt:"2023-07-06T10:30:00Z",publishedAt:null},{_id:"2",title:"Aenean tincidunt",content:"Aenean tincidunt ex sit amet consequat malesuada.",summary:"Aenean tincidunt ex sit amet consequat malesuada.",tags:["aenean","tincidunt","malesuada"],category:"Technology",coverImage:"image2.jpg",status:"published",createdAt:"2023-07-05T14:20:00Z",updatedAt:"2023-07-06T09:15:00Z",publishedAt:"2023-07-06T09:15:00Z"},{_id:"3",title:"Sed fermentum",content:"Sed fermentum libero ut fringilla pharetra.",summary:"Sed fermentum libero ut fringilla pharetra.",tags:["sed","fermentum","fringilla"],category:"Science",coverImage:"image3.jpg",status:"published",createdAt:"2023-07-04T16:45:00Z",updatedAt:"2023-07-05T11:10:00Z",publishedAt:"2023-07-05T11:10:00Z"},{_id:"4",title:"Nulla facilisi",content:"Nulla facilisi. Donec convallis diam vel maximus efficitur.",summary:"Nulla facilisi. Donec convallis diam vel maximus efficitur.",tags:["nulla","facilisi","convallis"],category:"General",coverImage:"image4.jpg",status:"draft",createdAt:"2023-07-03T09:20:00Z",updatedAt:"2023-07-03T09:20:00Z",publishedAt:null},{_id:"5",title:"Vestibulum at varius",content:"Vestibulum at varius dui, non maximus metus.",summary:"Vestibulum at varius dui, non maximus metus.",tags:["vestibulum","varius","dui"],category:"Technology",coverImage:"image5.jpg",status:"published",createdAt:"2023-07-02T14:30:00Z",updatedAt:"2023-07-04T09:45:00Z",publishedAt:"2023-07-04T09:45:00Z"},{_id:"6",title:"Praesent gravida",content:"Praesent gravida ipsum at lorem facilisis aliquam.",summary:"Praesent gravida ipsum at lorem facilisis aliquam.",tags:["praesent","gravida","facilisis"],category:"Science",coverImage:"image6.jpg",status:"published",createdAt:"2023-07-01T10:10:00Z",updatedAt:"2023-07-03T15:25:00Z",publishedAt:"2023-07-03T15:25:00Z"},{_id:"7",title:"Fusce tempus",content:"Fusce tempus velit vitae libero viverra lacinia.",summary:"Fusce tempus velit vitae libero viverra lacinia.",tags:["fusce","tempus","viverra"],category:"General",coverImage:"image7.jpg",status:"draft",createdAt:"2023-06-30T12:05:00Z",updatedAt:"2023-07-01T16:40:00Z",publishedAt:null},{_id:"8",title:"Aliquam erat volutpat",content:"Aliquam erat volutpat. Curabitur facilisis ullamcorper mauris ut efficitur.",summary:"Aliquam erat volutpat. Curabitur facilisis ullamcorper mauris ut efficitur.",tags:["aliquam","volutpat","curabitur"],category:"Technology",coverImage:"image8.jpg",status:"published",createdAt:"2023-06-29T08:15:00Z",updatedAt:"2023-07-02T13:20:00Z",publishedAt:"2023-07-02T13:20:00Z"},{_id:"9",title:"Morbi consequat",content:"Morbi consequat nibh vel nisi cursus ultrices.",summary:"Morbi consequat nibh vel nisi cursus ultrices.",tags:["morbi","consequat","nibh"],category:"Science",coverImage:"image9.jpg",status:"published",createdAt:"2023-06-28T14:50:00Z",updatedAt:"2023-06-30T10:30:00Z",publishedAt:"2023-06-30T10:30:00Z"},{_id:"10",title:"Etiam nec pharetra",content:"Etiam nec pharetra nunc, eu maximus diam.",summary:"Etiam nec pharetra nunc, eu maximus diam.",tags:["etiam","pharetra","maximus"],category:"General",coverImage:"image10.jpg",status:"draft",createdAt:"2023-06-27T11:25:00Z",updatedAt:"2023-06-27T11:25:00Z",publishedAt:null}],total:10,current:1,pageSize:15}};e.loading.spinning=!1;let o=a.data.result;for(const l of o)l.createdAt=q.formatTime(l.createdAt),l.updatedAt=q.formatTime(l.updatedAt),l.publishedAt=q.formatTime(l.publishedAt);e.dataList=o,e.query.pagination.total=a.data.total,e.query.pagination.current=a.data.current,e.query.pagination.pageSize=a.data.pageSize},x=(a,o,l)=>{U(a)||g(a),U(l)||T(l)},d=a=>{e.show.view=!0,e.viewData=a},n=a=>{e.show.edit=!0,a&&a._id?e.editTitle="修改文章":e.editTitle="添加文章",e.updateData=a},h=a=>{F("确认删除该条数据?").then(o=>{o&&E.success("删除成功"),u()})},m=a=>{e.show.add=!1,e.show.reset=!1,e.show.view=!1,e.show.edit=!1,a&&u()};return u(),(a,o)=>{const l=r("a-input"),$=r("a-form-item"),k=r("IconFont"),S=r("a-button"),N=r("a-image"),L=r("a-table");return w(),C("section",null,[t(H,{formValue:e.query.params,onSubmit:u,onReset:s},{default:i(()=>[t($,{name:"name"},{default:i(()=>[t(l,{value:e.query.params.username,"onUpdate:value":o[0]||(o[0]=p=>e.query.params.username=p),allowClear:"",placeholder:"请输入标题",onPressEnter:u,autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},8,["formValue"]),t(P,{onAdd:n,addAuth:"sys:user:create"},{default:i(()=>[t(S,{size:"small",type:"primary"},{default:i(()=>[t(k,{type:"icon-upload"}),v(" 导入 ")]),_:1}),t(S,{size:"small",type:"primary"},{default:i(()=>[t(k,{type:"icon-upload"}),v(" 导出 ")]),_:1})]),_:1}),t(L,{"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:A},bordered:"",resizable:!0,loading:e.loading,columns:y,"row-key":p=>p._id,pagination:e.query.pagination,onChange:x,"row-class-name":(p,f)=>f%2===1?"table-striped":null,"data-source":e.dataList},{bodyCell:i(({column:p,record:f})=>[p.key==="avatar"?(w(),R(N,{key:0,width:40,src:f.avatar},null,8,["src"])):p.key==="action"?(w(),R(W,{key:1,onView:V=>d(f),onEdit:V=>n(f),onDelete:V=>h(f)},null,8,["onView","onEdit","onDelete"])):M("",!0)]),_:1},8,["row-selection","loading","row-key","pagination","row-class-name","data-source"]),t(j,{minWidth:650,show:e.show.edit,title:e.editTitle,key:"GetUserInfo",onClose:m},{default:i(()=>[t(Q,{updateData:e.updateData,onClose:m},null,8,["updateData"])]),_:1},8,["show","title"]),t(j,{minWidth:650,show:e.show.view,title:"查看用户",key:"ViewUserInfo",onClose:m},{default:i(()=>[t(ee,{viewData:e.viewData,onClose:m},null,8,["viewData"])]),_:1},8,["show"])])}}};export{ce as default};
